{"remainingRequest":"/Users/matia/Desktop/phila.gov-covid-guidance-documents-table/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/matia/Desktop/phila.gov-covid-guidance-documents-table/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/matia/Desktop/phila.gov-covid-guidance-documents-table/src/App.vue","mtime":1607354624693},{"path":"/Users/matia/Desktop/phila.gov-covid-guidance-documents-table/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matia/Desktop/phila.gov-covid-guidance-documents-table/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/matia/Desktop/phila.gov-covid-guidance-documents-table/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/matia/Desktop/phila.gov-covid-guidance-documents-table/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IFNpdGVGaW5kZXIgZnJvbSAnLi9jb21wb25lbnRzL1NpdGVGaW5kZXIudnVlJzsKaW1wb3J0IHsgQ2xpZW50VGFibGUgfSBmcm9tICd2dWUtdGFibGVzLTInOwovLyBpbXBvcnQgeyBfIH0gZnJvbSAndnVlLXVuZGVyc2NvcmUnOwpjb25zdCBhcHBfa2V5ID0gImtleU5jc2VNSUxMS1ZWRkMzIjsKClZ1ZS51c2UoQ2xpZW50VGFibGUsIHsKICBvcHRpb25zOiB7fSwgCiAgdXNlVnVleDogZmFsc2UsCiAgdGhlbWU6ICdib290c3RyYXAzJywKICB0ZW1wbGF0ZTogJ2RlZmF1bHQnLAp9KTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBjb21wb25lbnRzOiB7CiAgICBTaXRlRmluZGVyLAogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBhcGk6IHsKICAgICAgICBnZXREb2N1bWVudFRhYmxlczogJ2h0dHBzOi8vc3RhZ2luZy1hZG1pbi5waGlsYS5nb3Yvd3AtanNvbi9kb2N1bWVudHMvdjEvZG9jdW1lbnQnLAogICAgICB9LAogICAgICBkb2N1bWVudFRhYmxlczogW10sCiAgICAgIHF1ZXJ5OiBudWxsLAogICAgfTsKICB9LAogIGNyZWF0ZWQgKCkgewogICAgbGV0IHZtID0gdGhpczsKICAgIHZtLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldERvY3VtZW50VGFibGVzICgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IHNsdWcgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICAgIHNsdWcgPSAnaHR0cHM6Ly9hcGkuYWlydGFibGUuY29tL3YwL2FwcDZIV29CbFRvTnAxdUtRL1RhYmxlJTIwMT8mdmlldz1HcmlkJTIwdmlldyc7CiAgICAgIHJldHVybiBheGlvcy5nZXQoCiAgICAgICAgc2x1ZywKICAgICAgICB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgYXBwX2tleSB9IH0sCiAgICAgICkuCiAgICAgIHRoZW4oYXN5bmMgKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgCiAgICAgICAgbGV0IHRlbXBEYXRhID0gcmVzcG9uc2UuZGF0YS5yZWNvcmRzLm1hcChmdW5jdGlvbihlbnRyeSkgewogICAgICAgICAgICByZXR1cm4gZW50cnlbImZpZWxkcyJdOwogICAgICAgICAgfSk7CgogICAgICAgIHRlbXBEYXRhLmZvckVhY2goZnVuY3Rpb24oc2l0ZSkgewogICAgICAgICAgc2l0ZVsnVGl0bGUnXSA9IHNpdGVbJ0VuZ2xpc2ggdGl0bGUnXTsKICAgICAgICAgIGRlbGV0ZSBzaXRlWydFbmdsaXNoIHRpdGxlJ107CiAgICAgICAgICBzaXRlWydGb3JtYXQnXSA9IHNpdGVbJ1R5cGUnXTsKICAgICAgICAgIGRlbGV0ZSBzaXRlWydUeXBlJ107CiAgICAgICAgfSk7CgogICAgICAgICAKICAgICAgICB2bS5kb2N1bWVudFRhYmxlcyA9IHRlbXBEYXRhOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBwYXJzZVF1ZXJ5ICgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgdm0ucXVlcnkgPSB2bS4kcm91dGUuaGFzaDsKICAgIH0sCiAgICBhc3luYyBpbml0ICgpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgYXdhaXQgdm0ucGFyc2VRdWVyeSgpOwogICAgICBhd2FpdCB2bS5nZXREb2N1bWVudFRhYmxlcygpOwogICAgICBhd2FpdCB2bS5zY3JvbGxUb0RpdigpOyAKICAgIH0sCiAgICBhc3luYyBzY3JvbGxUb0RpdigpIHsKICAgICAgbGV0IHZtID0gdGhpczsKICAgICAgbGV0IGRpdiA9IHZtLiRyb3V0ZS5oYXNoLnNwbGl0KCcjJylbMV07CiAgICAgIGlmICggZGl2ICkgewogICAgICAgIGxldCBkaXN0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdikub2Zmc2V0VG9wOwogICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7CiAgICAgICAgICB0b3A6IGRpc3RhbmNlLAogICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"vue-app\">\n    <div\n      data-swiftype-index=\"true\"\n      class=\"entry-content\"\n    >\n      <!-- Site finder -->\n      <section class=\"mtl\">\n        <div class=\"large-24 columns\">\n          <SiteFinder\n            :document-table=\"documentTables\"\n            :query=\"query\"\n            title-hash=\"Guidance documents\"\n          />\n        </div>\n      </section>\n      <!-- Site finder -->\n    </div> <!-- End .entry-content -->\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport axios from 'axios';\nimport SiteFinder from './components/SiteFinder.vue';\nimport { ClientTable } from 'vue-tables-2';\n// import { _ } from 'vue-underscore';\nconst app_key = \"keyNcseMILLKVVFC3\";\n\nVue.use(ClientTable, {\n  options: {}, \n  useVuex: false,\n  theme: 'bootstrap3',\n  template: 'default',\n});\n\nexport default {\n  name: 'App',\n  components: {\n    SiteFinder,\n  },\n  data () {\n    return {\n      api: {\n        getDocumentTables: 'https://staging-admin.phila.gov/wp-json/documents/v1/document',\n      },\n      documentTables: [],\n      query: null,\n    };\n  },\n  created () {\n    let vm = this;\n    vm.init();\n  },\n  methods: {\n    getDocumentTables () {\n      let vm = this;\n      let slug = window.location.pathname;\n      slug = 'https://api.airtable.com/v0/app6HWoBlToNp1uKQ/Table%201?&view=Grid%20view';\n      return axios.get(\n        slug,\n        { headers: { Authorization: \"Bearer \" + app_key } },\n      ).\n      then(async (response) => {\n        \n        let tempData = response.data.records.map(function(entry) {\n            return entry[\"fields\"];\n          });\n\n        tempData.forEach(function(site) {\n          site['Title'] = site['English title'];\n          delete site['English title'];\n          site['Format'] = site['Type'];\n          delete site['Type'];\n        });\n\n         \n        vm.documentTables = tempData;\n        return true;\n      }).catch(() => {\n        return false;\n      });\n    },\n    async parseQuery () {\n      let vm = this;\n      vm.query = vm.$route.hash;\n    },\n    async init () {\n      let vm = this;\n      await vm.parseQuery();\n      await vm.getDocumentTables();\n      await vm.scrollToDiv(); \n    },\n    async scrollToDiv() {\n      let vm = this;\n      let div = vm.$route.hash.split('#')[1];\n      if ( div ) {\n        let distance = document.getElementById(div).offsetTop;\n        window.scrollTo({\n          top: distance,\n          behavior: 'smooth',\n        });\n      }\n    },\n  },\n};\n</script>"]}]}